/* Copyright 2015 Samsung Electronics Co., LTD * * Licensed under the Apache License, Version 2.0 (the "License"); * you may not use this file except in compliance with the License. * You may obtain a copy of the License at * *     http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an "AS IS" BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. * See the License for the specific language governing permissions and * limitations under the License. */package org.gearvrf.modelviewer2;import org.gearvrf.GVRAndroidResource;import org.gearvrf.GVRCameraRig;import org.gearvrf.GVRContext;import org.gearvrf.GVRScene;import org.gearvrf.GVRSceneObject;import org.gearvrf.GVRMain;import org.gearvrf.GVRTexture;import org.gearvrf.scene_objects.GVRModelSceneObject;import android.graphics.Color;import android.os.Environment;import android.util.Log;import android.content.Context;import java.io.File;import java.io.IOException;import java.util.ArrayList;public class ModelViewer2Manager extends GVRMain {	private GVRContext mGVRContext;    private GVRModelSceneObject mRoom;    private ArrayList<GVRModelSceneObject> allModels;    private final String mRoomPath = "room.fbx";    private int on = 0;    private GVRScene scene;    private int noOfModels = 0;    private int currentModel = 0;    private String internalPath;    public ModelViewer2Manager(String path){        internalPath = path;    }    private GVRModelSceneObject loadFbxFile(GVRContext gvrContext, String fbxFile){        try {            return gvrContext.loadModel(fbxFile);        }catch (IOException e) {            e.printStackTrace();        }        return null;    }    private ArrayList<GVRModelSceneObject> loadAllModels(){        ArrayList<GVRModelSceneObject> allModels = new ArrayList<GVRModelSceneObject>();        try {            /*Log.e("SD PAth", internalPath);            CardReader cRObject = new CardReader("data/data/GVRModelViewer2/", ".fbx");            File list[] = cRObject.getModels();            for (File file : list){                Log.e("FBx File", file.getName());                allModels.add(mGVRContext.loadModel(file.getName()));                noOfModels++;            }*/            allModels.add(mGVRContext.loadModel("TRex_NoGround.fbx"));            allModels.add(mGVRContext.loadModel("TRex_NoGround.fbx"));            noOfModels = 2;            return allModels;        }catch (IOException e) {            e.printStackTrace();        }        return null;    }	@Override	public void onInit(GVRContext gvrContext) {		mGVRContext = gvrContext;		scene = gvrContext.getNextMainScene();        mGVRContext.getMainScene().getMainCameraRig().getOwnerObject()               .getTransform().setPosition(0.0f, 0.0f, 0.0f);        mRoom = loadFbxFile(gvrContext, mRoomPath);        mRoom.getTransform().setPosition(0.0f, -10.0f, -10.0f);        mRoom.getTransform().setRotationByAxis(90.0f, 1.0f, 0.0f, 0.0f);        mRoom.getTransform().setRotationByAxis(40.0f, 0.0f, 1.0f, 0.0f);        mRoom.getTransform().setScale(1.5f, 1.5f, 1.5f);        allModels = loadAllModels();        scene.addSceneObject(mRoom);    }	@Override	public void onStep() {        try {            Thread.sleep(2000);            mRoom.removeChildObject(allModels.get(currentModel));            currentModel = (currentModel+1) % noOfModels;            mRoom.addChildObject(allModels.get(currentModel));            scene.removeSceneObject(mRoom);            scene.addSceneObject(mRoom);        } catch (InterruptedException e) {            e.printStackTrace();        }    }}